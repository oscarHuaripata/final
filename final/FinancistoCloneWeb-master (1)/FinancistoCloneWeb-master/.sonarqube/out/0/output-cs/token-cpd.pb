©N
aC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\AccountController.cs
	namespace 	
FinancistoCloneWeb
 
. 
Controllers (
{ 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $
BaseController% 3
{ 
private 
FinancistoContext !
_context" *
;* +
public 
IHostEnvironment 
_hostEnv  (
;( )
public 
AccountController  
(  !
FinancistoContext! 2
context3 :
,: ;
IHostEnvironment< L
hostEnvM T
)T U
:V W
baseW [
([ \
context\ c
)c d
{ 	
_context 
= 
context 
; 
_hostEnv 
= 
hostEnv 
; 
} 	
[ 	
HttpGet	 
] 
public 
ActionResult 
Index !
(! "
)" #
{ 	
var 
accounts 
= 
new 
List #
<# $
Account$ +
>+ ,
(, -
)- .
;. /
return   
View   
(   
accounts    
)    !
;  ! "
}!! 	
[## 	
HttpGet##	 
]## 
public$$ 
ActionResult$$ 
_Index$$ "
($$" #
)$$# $
{%% 	
var&& 
accounts&& 
=&& 
_context&& #
.&&# $
Accounts&&$ ,
.'' 
Where'' 
('' 
o'' 
=>'' 
o'' 
.'' 
UserId'' $
==''% '

LoggedUser''( 2
(''2 3
)''3 4
.''4 5
Id''5 7
)''7 8
.(( 
Include(( 
((( 
o(( 
=>(( 
o(( 
.((  
Type((  $
)(($ %
.)) 
ToList)) 
()) 
))) 
;)) 
return++ 
View++ 
(++ 
accounts++  
)++  !
;++! "
},, 	
[// 	
HttpGet//	 
]// 
public00 
ActionResult00 
Create00 "
(00" #
)00# $
{11 	
ViewBag22 
.22 
Types22 
=22 
_context22 $
.22$ %
Types22% *
.22* +
ToList22+ 1
(221 2
)222 3
;223 4
return33 
View33 
(33 
$str33  
,33  !
new33" %
Account33& -
(33- .
)33. /
)33/ 0
;330 1
}44 	
[66 	
HttpPost66	 
]66 
public77 
ActionResult77 
Create77 "
(77" #
Account77# *
account77+ 2
,772 3
	IFormFile774 =
image77> C
)77C D
{88 	
account99 
.99 
UserId99 
=99 

LoggedUser99 '
(99' (
)99( )
.99) *
Id99* ,
;99, -
if;; 
(;; 

ModelState;; 
.;; 
IsValid;; "
);;" #
{<< 
account== 
.== 
	ImagePath== !
===" #
	SaveImage==$ -
(==- .
image==. 3
)==3 4
;==4 5
if?? 
(?? 
account?? 
.?? 
TypeId?? "
==??# %
$num??& '
)??' (
{??) *
account@@ 
.@@ 
Limit@@ !
=@@" #
account@@$ +
.@@+ ,
Amount@@, 2
;@@2 3
accountAA 
.AA 
AmountAA "
=AA# $
$numAA% &
;AA& '
}BB 
ifDD 
(DD 
accountDD 
.DD 
AmountDD "
>DD# $
$numDD% &
)DD& '
{EE 
accountFF 
.FF 
TransactionsFF (
=FF) *
newFF+ .
ListFF/ 3
<FF3 4
TransactionFF4 ?
>FF? @
{GG 
newHH 
TransactionHH '
{II 
DateJJ  
=JJ! "
DateTimeJJ# +
.JJ+ ,
NowJJ, /
,JJ/ 0
TypeKK  
=KK! "
$strKK# ,
,KK, -
AmountLL "
=LL# $
accountLL% ,
.LL, -
AmountLL- 3
,LL3 4
SummaryMM #
=MM$ %
$strMM& 5
}NN 
}OO 
;OO 
}PP 
_contextRR 
.RR 
AccountsRR !
.RR! "
AddRR" %
(RR% &
accountRR& -
)RR- .
;RR. /
_contextSS 
.SS 
SaveChangesSS $
(SS$ %
)SS% &
;SS& '
TempDataUU 
[UU 
$strUU )
]UU) *
=UU+ ,
$strUU- N
;UUN O
returnVV 
RedirectToActionVV '
(VV' (
$strVV( /
)VV/ 0
;VV0 1
}WW 
ViewBagYY 
.YY 
TypesYY 
=YY 
_contextYY $
.YY$ %
TypesYY% *
.YY* +
ToListYY+ 1
(YY1 2
)YY2 3
;YY3 4
returnZZ 
ViewZZ 
(ZZ 
$strZZ  
,ZZ  !
accountZZ" )
)ZZ) *
;ZZ* +
}[[ 	
[__ 	
HttpGet__	 
]__ 
public`` 
ActionResult`` 
Edit``  
(``  !
int``! $
id``% '
)``' (
{aa 	
ViewBagbb 
.bb 
Typesbb 
=bb 
_contextbb $
.bb$ %
Typesbb% *
.bb* +
ToListbb+ 1
(bb1 2
)bb2 3
;bb3 4
varcc 
accountcc 
=cc 
_contextcc "
.cc" #
Accountscc# +
.cc+ ,
Wherecc, 1
(cc1 2
occ2 3
=>cc4 6
occ7 8
.cc8 9
Idcc9 ;
==cc< >
idcc? A
)ccA B
.ccB C
FirstOrDefaultccC Q
(ccQ R
)ccR S
;ccS T
returnee 
Viewee 
(ee 
accountee 
)ee  
;ee  !
}ff 	
[hh 	
HttpPosthh	 
]hh 
publicii 
ActionResultii 
Editii  
(ii  !
Accountii! (
accountii) 0
)ii0 1
{jj 	
ifkk 
(kk 

ModelStatekk 
.kk 
IsValidkk "
)kk" #
{ll 
_contextmm 
.mm 
Accountsmm !
.mm! "
Updatemm" (
(mm( )
accountmm) 0
)mm0 1
;mm1 2
_contextnn 
.nn 
SaveChangesnn $
(nn$ %
)nn% &
;nn& '
returnoo 
RedirectToActionoo '
(oo' (
$stroo( /
)oo/ 0
;oo0 1
}pp 
ViewBagrr 
.rr 
Typesrr 
=rr 
_contextrr $
.rr$ %
Typesrr% *
.rr* +
ToListrr+ 1
(rr1 2
)rr2 3
;rr3 4
returnss 
Viewss 
(ss 
accountss 
)ss  
;ss  !
}tt 	
[vv 	
HttpGetvv	 
]vv 
publicww 
ActionResultww 
Deleteww "
(ww" #
intww# &
idww' )
)ww) *
{xx 	
varyy 
accountyy 
=yy 
_contextyy "
.yy" #
Accountsyy# +
.yy+ ,
Whereyy, 1
(yy1 2
oyy2 3
=>yy4 6
oyy7 8
.yy8 9
Idyy9 ;
==yy< >
idyy? A
)yyA B
.yyB C
FirstOrDefaultyyC Q
(yyQ R
)yyR S
;yyS T
_contextzz 
.zz 
Accountszz 
.zz 
Removezz $
(zz$ %
accountzz% ,
)zz, -
;zz- .
_context{{ 
.{{ 
SaveChanges{{  
({{  !
){{! "
;{{" #
return|| 
RedirectToAction|| #
(||# $
$str||$ +
)||+ ,
;||, -
}}} 	
private 
string 
	SaveImage  
(  !
	IFormFile! *
image+ 0
)0 1
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
image
ÅÅ 
!=
ÅÅ 
null
ÅÅ 
&&
ÅÅ  
image
ÅÅ! &
.
ÅÅ& '
Length
ÅÅ' -
>
ÅÅ. /
$num
ÅÅ0 1
)
ÅÅ1 2
{
ÇÇ 
var
ÉÉ 
basePath
ÉÉ 
=
ÉÉ 
_hostEnv
ÉÉ '
.
ÉÉ' (
ContentRootPath
ÉÉ( 7
+
ÉÉ8 9
$str
ÉÉ: E
;
ÉÉE F
var
ÑÑ 
ruta
ÑÑ 
=
ÑÑ 
$str
ÑÑ %
+
ÑÑ& '
image
ÑÑ( -
.
ÑÑ- .
FileName
ÑÑ. 6
;
ÑÑ6 7
using
ÜÜ 
(
ÜÜ 
var
ÜÜ 
strem
ÜÜ  
=
ÜÜ! "
new
ÜÜ# &

FileStream
ÜÜ' 1
(
ÜÜ1 2
basePath
ÜÜ2 :
+
ÜÜ; <
ruta
ÜÜ= A
,
ÜÜA B
FileMode
ÜÜC K
.
ÜÜK L
Create
ÜÜL R
)
ÜÜR S
)
ÜÜS T
{
áá 
image
àà 
.
àà 
CopyTo
àà  
(
àà  !
strem
àà! &
)
àà& '
;
àà' (
return
ââ 
ruta
ââ 
;
ââ  
}
ää 
}
ãã 
return
åå 
null
åå 
;
åå 
}
çç 	
}
èè 
}êê Å9
^C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\AuthController.cs
	namespace 	
FinancistoCloneWeb
 
. 
Controllers (
{ 
public 

class 
AuthController 
:  !

Controller" ,
{ 
public 
const 
String 
PASSWORD $
=% &
$str' ,
;, -
public 
string 
MiPropiedad !
{" #
get$ '
;' (
set) ,
;, -
}. /
private 
IConfiguration 
configuration ,
;, -
private 
ICookieAuthService "
cookieAuthService# 4
;4 5
private 
IUserRepository 

repository  *
;* +
public 
AuthController 
( 
IUserRepository -

repository. 8
,8 9
ICookieAuthService: L
cookieAuthServiceM ^
,^ _
IConfiguration` n
configurationo |
)| }
{ 	
this 
. 
configuration 
=  
configuration! .
;. /
this   
.   

repository   
=   

repository   (
;  ( )
this!! 
.!! 
cookieAuthService!! "
=!!# $
cookieAuthService!!% 6
;!!6 7
}"" 	
[%% 	
HttpGet%%	 
]%% 
public&& 
IActionResult&& 
Create&& #
(&&# $
)&&$ %
{'' 	
return(( 
View(( 
((( 
)(( 
;(( 
})) 	
[++ 	
HttpPost++	 
]++ 
public,, 
IActionResult,, 
Create,, #
(,,# $
User,,$ (
user,,) -
),,- .
{-- 	
int.. 
target.. 
=.. 
-.. 
$num.. 
;.. 
int// 
num// 
=// 
$num// 
;// 
target11 
=11 
-11 
num11 
;11 
target22 
=22 
+22 
num22 
;22 
if55 
(55 

repository55 
.55 
FindByUsername55 )
(55) *
user55* .
.55. /
Username55/ 7
)557 8
!=559 ;
null55< @
)55@ A
{66 

ModelState77 
.77 
AddModelError77 (
(77( )
$str77) 3
,773 4
$str775 H
)77H I
;77I J
}88 
if:: 
(:: 

ModelState:: 
.:: 
IsValid:: "
)::" #
{;; 
user<< 
.<< 
Password<< 
=<< 

CreateHash<<  *
(<<* +
user<<+ /
.<</ 0
Password<<0 8
)<<8 9
;<<9 :

repository== 
.== 
Create== !
(==! "
user==" &
)==& '
;==' (
return>> 
RedirectToAction>> '
(>>' (
$str>>( /
)>>/ 0
;>>0 1
}?? 
else@@ 
{AA 
returnBB 
ViewBB 
(BB 
)BB 
;BB 
}CC 
}DD 	
[FF 	
HttpGetFF	 
]FF 
publicGG 
IActionResultGG 
LoginGG "
(GG" #
)GG# $
{HH 	
returnJJ 
ViewJJ 
(JJ 
)JJ 
;JJ 
}KK 	
[MM 	
HttpPostMM	 
]MM 
publicNN 
IActionResultNN 
LoginNN "
(NN" #
stringNN# )
usernameNN* 2
,NN2 3
stringNN4 :
passwordNN; C
)NNC D
{OO 	
varSS 
userSS 
=SS 

repositorySS !
.SS! "
FindUserSS" *
(SS* +
usernameSS+ 3
,SS3 4

CreateHashSS5 ?
(SS? @
passwordSS@ H
)SSH I
)SSI J
;SSJ K
ifUU 
(UU 
userUU 
!=UU 
nullUU 
)UU 
{VV 
varXX 
claimsXX 
=XX 
newXX  
ListXX! %
<XX% &
ClaimXX& +
>XX+ ,
{XX- .
newYY 
ClaimYY 
(YY 

ClaimTypesYY (
.YY( )
NameYY) -
,YY- .
usernameYY/ 7
)YY7 8
}ZZ 
;ZZ 
var\\ 
claimsIdentity\\ "
=\\# $
new\\% (
ClaimsIdentity\\) 7
(\\7 8
claims\\8 >
,\\> ?(
CookieAuthenticationDefaults\\@ \
.\\\ ] 
AuthenticationScheme\\] q
)\\q r
;\\r s
var]] 
claimsPrincipal]] #
=]]$ %
new]]& )
ClaimsPrincipal]]* 9
(]]9 :
claimsIdentity]]: H
)]]H I
;]]I J
cookieAuthService`` !
.``! "
SetHttpContext``" 0
(``0 1
HttpContext``1 <
)``< =
;``= >
cookieAuthServiceaa !
.aa! "
Loginaa" '
(aa' (
claimsPrincipalaa( 7
)aa7 8
;aa8 9
returncc 
RedirectToActioncc '
(cc' (
$strcc( /
,cc/ 0
$strcc1 7
)cc7 8
;cc8 9
}dd 

ModelStateff 
.ff 
AddModelErrorff $
(ff$ %
$strff% ,
,ff, -
$strff. Q
)ffQ R
;ffR S
returngg 
Viewgg 
(gg 
)gg 
;gg 
}hh 	
[jj 	
HttpGetjj	 
]jj 
publickk 
IActionResultkk 
Logoutkk #
(kk# $
)kk$ %
{ll 	
HttpContextmm 
.mm 
SignOutAsyncmm $
(mm$ %
)mm% &
;mm& '
returnnn 
RedirectToActionnn #
(nn# $
$strnn$ +
)nn+ ,
;nn, -
}oo 	
privateqq 
stringqq 

CreateHashqq !
(qq! "
stringqq" (
inputqq) .
)qq. /
{rr 	
varss 
shass 
=ss 
SHA256ss 
.ss 
Createss #
(ss# $
)ss$ %
;ss% &
inputtt 
+=tt 
configurationtt "
.tt" #
GetValuett# +
<tt+ ,
stringtt, 2
>tt2 3
(tt3 4
$strtt4 ;
)tt; <
;tt< =
varuu 
hashuu 
=uu 
shauu 
.uu 
ComputeHashuu &
(uu& '
Encodinguu' /
.uu/ 0
Defaultuu0 7
.uu7 8
GetBytesuu8 @
(uu@ A
inputuuA F
)uuF G
)uuG H
;uuH I
returnww 
Convertww 
.ww 
ToBase64Stringww )
(ww) *
hashww* .
)ww. /
;ww/ 0
}xx 	
}yy 
}zz ü
^C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\BaseController.cs
	namespace 	
FinancistoCloneWeb
 
. 
Controllers (
{		 
public

 

abstract

 
class

 
BaseController

 (
:

) *

Controller

+ 5
{ 
private 
readonly 
FinancistoContext *
context+ 2
;2 3
public 
BaseController 
( 
FinancistoContext /
context0 7
)7 8
{ 	
this 
. 
context 
= 
context "
;" #
} 	
	protected 
User 

LoggedUser !
(! "
)" #
{ 	
var 
claim 
= 
HttpContext #
.# $
User$ (
.( )
Claims) /
./ 0
FirstOrDefault0 >
(> ?
)? @
;@ A
var 
user 
= 
context 
. 
Users $
.$ %
Where% *
(* +
o+ ,
=>- /
o0 1
.1 2
Username2 :
==; =
claim> C
.C D
ValueD I
)I J
.J K
FirstOrDefaultK Y
(Y Z
)Z [
;[ \
return 
user 
; 
} 	
} 
} ˇ
^C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\FileController.cs
	namespace 	
FinancistoCloneWeb
 
. 
Controllers (
{ 
public 

class 
FileController 
:  !

Controller" ,
{		 
private

 
IFileService

 
fileService

 (
;

( )
private 
readonly 
IHostEnvironment )
host* .
;. /
public 
FileController 
( 
IHostEnvironment .
host/ 3
)3 4
{ 	
this 
. 
host 
= 
host 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpGet	 
] 
public 
IActionResult 
Upload #
(# $
)$ %
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
public 
IActionResult 
Upload #
(# $
string$ *
dest+ /
,/ 0
	IFormFile1 :
file; ?
)? @
{ 	
if   
(   
dest   
==   
$str   
)    
fileService!! 
=!! 
new!! !
LocalFileService!!" 2
(!!2 3
host!!3 7
)!!7 8
;!!8 9
if"" 
("" 
dest"" 
=="" 
$str"" !
)""! "
fileService## 
=## 
new## !
DropboxFileService##" 4
(##4 5
)##5 6
;##6 7
if$$ 
($$ 
dest$$ 
==$$ 
$str$$ 
)$$  
fileService%% 
=%% 
new%% !
DriveFileService%%" 2
(%%2 3
)%%3 4
;%%4 5
fileService(( 
.(( 
Upload(( 
((( 
file(( #
)((# $
;(($ %
return)) 
View)) 
()) 
))) 
;)) 
}** 	
[,, 	
HttpPost,,	 
],, 
public-- 
IActionResult-- 
Donwload-- %
(--% &
string--& ,
filename--- 5
)--5 6
{.. 	
var// 
file// 
=// 
fileService// "
.//" #
Download//# +
(//+ ,
filename//, 4
)//4 5
;//5 6
return00 
View00 
(00 
)00 
;00 
}11 	
}22 
}33 ®/
^C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\HomeController.cs
	namespace 	
FinancistoCloneWeb
 
. 
Controllers (
{ 
[ 
	Authorize 
] 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private 
readonly 
ILogger  
<  !
HomeController! /
>/ 0
_logger1 8
;8 9
private 
List 
< 
Account 
> 
accounts &
=' (
new) ,
List- 1
<1 2
Account2 9
>9 :
{ 	
new 
Account 
{ 
Id 
= 
$num 
,  
Name! %
=& '
$str( 2
}2 3
,3 4
new 
Account 
{ 
Id 
= 
$num 
,  
Name! %
=& '
$str( =
}= >
,> ?
new 
Account 
{ 
Id 
= 
$num 
,  
Name! %
=& '
$str( C
}C D
,D E
new 
Account 
{ 
Id 
= 
$num 
,  
Name! %
=& '
$str( 3
}3 4
,4 5
new 
Account 
{ 
Id 
= 
$num 
,  
Name! %
=& '
$str( 9
}9 :
} 	
;	 

public 
HomeController 
( 
ILogger %
<% &
HomeController& 4
>4 5
logger6 <
)< =
{ 	
_logger 
= 
logger 
; 
}   	
["" 	
HttpGet""	 
]"" 
[## 	
AllowAnonymous##	 
]## 
public$$ 
IActionResult$$ 
Index$$ "
($$" #
)$$# $
{%% 	
return&& 
View&& 
(&& 
)&& 
;&& 
}'' 	
[)) 	
HttpPost))	 
])) 
public++ 
IActionResult++ 
Create++ #
(++# $
Account++$ +
account++, 3
)++3 4
{,, 	
if-- 
(-- 
string-- 
.-- 
IsNullOrEmpty-- $
(--$ %
account--% ,
.--, -
Name--- 1
)--1 2
)--2 3

ModelState.. 
... 
AddModelError.. (
(..( )
$str..) /
,../ 0
$str..1 F
)..F G
;..G H
if00 
(00 

ModelState00 
.00 
IsValid00 "
)00" #
{11 
return33 
RedirectToAction33 '
(33' (
$str33( /
)33/ 0
;330 1
}44 
return66 
View66 
(66 
account66 
)66  
;66  !
}88 	
public:: 
IActionResult:: 
Privacy:: $
(::$ %
)::% &
{;; 	
return<< 
View<< 
(<< 
)<< 
;<< 
}== 	
[?? 	
ResponseCache??	 
(?? 
Duration?? 
=??  !
$num??" #
,??# $
Location??% -
=??. /!
ResponseCacheLocation??0 E
.??E F
None??F J
,??J K
NoStore??L S
=??T U
true??V Z
)??Z [
]??[ \
public@@ 
IActionResult@@ 
Error@@ "
(@@" #
)@@# $
{AA 	
returnBB 
ViewBB 
(BB 
newBB 
ErrorViewModelBB *
{BB+ ,
	RequestIdBB- 6
=BB7 8
ActivityBB9 A
.BBA B
CurrentBBB I
?BBI J
.BBJ K
IdBBK M
??BBN P
HttpContextBBQ \
.BB\ ]
TraceIdentifierBB] l
}BBm n
)BBn o
;BBo p
}CC 	
publicEE 
ListEE 
<EE 
AccountEE 
>EE 
BuscarPorNombreEE ,
(EE, -
stringEE- 3
nameEE4 8
)EE8 9
{FF 	
returnHH 
accountsHH 
.HH 
WhereHH !
(HH! "
oHH" #
=>HH$ &
stringHH' -
.HH- .
CompareHH. 5
(HH5 6
RemoveAccentsII 
(II 
oII 
.II 
NameII 
)II 
,II 
RemoveAccentsII ,
(II, -
nameII- 1
)II1 2
,II2 3
StringComparisonII4 D
.IID E&
InvariantCultureIgnoreCaseIIE _
)II_ `
==IIa c
$numIId e
)IIe f
.IIf g
ToListIIg m
(IIm n
)IIn o
;IIo p
}JJ 	
privateLL 
staticLL 
stringLL 
RemoveAccentsLL +
(LL+ ,
stringLL, 2
sLL3 4
)LL4 5
{MM 	
EncodingNN 
destEncodingNN !
=NN" #
EncodingNN$ ,
.NN, -
GetEncodingNN- 8
(NN8 9
$strNN9 @
)NN@ A
;NNA B
returnPP 
destEncodingPP 
.PP  
	GetStringPP  )
(PP) *
EncodingQQ 
.QQ 
ConvertQQ  
(QQ  !
EncodingQQ! )
.QQ) *
UTF8QQ* .
,QQ. /
destEncodingQQ0 <
,QQ< =
EncodingQQ> F
.QQF G
UTF8QQG K
.QQK L
GetBytesQQL T
(QQT U
sQQU V
)QQV W
)QQW X
)QQX Y
;QQY Z
}RR 	
}SS 
}TT õ	
`C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\PersonController.cs
	namespace		 	
FinancistoCloneWeb		
 
.		 
Controllers		 (
{

 
public 

class 
PersonController !
:" #

Controller$ .
{ 
private 
readonly 
IPersonRepository *

repository+ 5
;5 6
public 
PersonController 
(  
IPersonRepository  1

repository2 <
)< =
{ 	
this 
. 

repository 
= 

repository (
;( )
} 	
[ 	
HttpGet	 
] 
public 
ActionResult 
Index !
(! "
)" #
{ 	
var 
people 
= 

repository #
.# $
GetAll$ *
(* +
)+ ,
;, -
return 
View 
( 
people 
) 
;  
} 	
}__ 
}`` æ7
eC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\TransactionController.cs
	namespace 	
FinancistoCloneWeb
 
. 
Controllers (
{		 
public

 

class

 !
TransactionController

 &
:

' (

Controller

) 3
{ 
private 
readonly 
FinancistoContext *
context+ 2
;2 3
public !
TransactionController $
($ %
FinancistoContext% 6
context7 >
)> ?
{ 	
this 
. 
context 
= 
context "
;" #
} 	
[ 	
HttpGet	 
] 
public 
IActionResult 
Index "
(" #
int# &
	accountId' 0
)0 1
{ 	
var 
transactions 
= 
context &
.& '
Transactions' 3
. 
Where 
( 
o 
=> 
o 
. 
	AccountId '
==( *
	accountId+ 4
)4 5
. 
OrderByDescending "
(" #
o# $
=>% '
o( )
.) *
Date* .
). /
. 
ToList 
( 
) 
; 
ViewBag 
. 
Account 
= 
context %
.% &
Accounts& .
.. /
First/ 4
(4 5
o5 6
=>7 9
o: ;
.; <
Id< >
==? A
	accountIdB K
)K L
;L M
return 
View 
( 
transactions $
)$ %
;% &
} 	
[ 	
HttpGet	 
] 
public 
IActionResult 
Create #
(# $
int$ '
	accountId( 1
)1 2
{   	
ViewBag!! 
.!! 
	AccountId!! 
=!! 
	accountId!!  )
;!!) *
return"" 
View"" 
("" 
)"" 
;"" 
}## 	
[%% 	
HttpPost%%	 
]%% 
public&& 
IActionResult&& 
Create&& #
(&&# $
Transaction&&$ /
transaction&&0 ;
)&&; <
{'' 	
if(( 
((( 
!(( 

ModelState(( 
.(( 
IsValid(( #
)((# $
{)) 
ViewBag** 
.** 
	AccountId** !
=**" #
transaction**$ /
.**/ 0
	AccountId**0 9
;**9 :
return++ 
View++ 
(++ 
transaction++ '
)++' (
;++( )
},, 
if// 
(// 
transaction// 
.// 
Type//  
==//! #
$str//$ +
)//+ ,
transaction00 
.00 
Amount00 "
*=00# %
-00& '
$num00' (
;00( )
context11 
.11 
Transactions11  
.11  !
Add11! $
(11$ %
transaction11% 0
)110 1
;111 2
context22 
.22 
SaveChanges22 
(22  
)22  !
;22! "
UpdateAmountAcount44 
(44 
transaction44 *
.44* +
	AccountId44+ 4
)444 5
;445 6
return66 
RedirectToAction66 #
(66# $
$str66$ +
,66+ ,
new66- 0
{661 2
	accountId663 <
=66= >
transaction66? J
.66J K
	AccountId66K T
}66U V
)66V W
;66W X
}77 	
[99 	
HttpGet99	 
]99 
public:: 
IActionResult:: 
Edit:: !
(::! "
int::" %
id::& (
)::( )
{;; 	
var<< 
transaction<< 
=<< 
context<< %
.<<% &
Transactions<<& 2
.<<2 3
FirstOrDefault<<3 A
(<<A B
o<<B C
=><<D F
o<<G H
.<<H I
Id<<I K
==<<L N
id<<O Q
)<<Q R
;<<R S
return== 
View== 
(== 
transaction== #
)==# $
;==$ %
}>> 	
[@@ 	
HttpPost@@	 
]@@ 
publicAA 
IActionResultAA 
EditAA !
(AA! "
TransactionAA" -
transactionAA. 9
)AA9 :
{BB 	
ifCC 
(CC 
!CC 

ModelStateCC 
.CC 
IsValidCC #
)CC# $
returnDD 
ViewDD 
(DD 
transactionDD '
)DD' (
;DD( )
ifGG 
(GG 
transactionGG 
.GG 
TypeGG  
==GG! #
$strGG$ +
)GG+ ,
transactionHH 
.HH 
AmountHH "
*=HH# %
-HH& '
$numHH' (
;HH( )
contextII 
.II 
TransactionsII  
.II  !
UpdateII! '
(II' (
transactionII( 3
)II3 4
;II4 5
contextJJ 
.JJ 
SaveChangesJJ 
(JJ  
)JJ  !
;JJ! "
UpdateAmountAcountLL 
(LL 
transactionLL *
.LL* +
	AccountIdLL+ 4
)LL4 5
;LL5 6
returnNN 
RedirectToActionNN #
(NN# $
$strNN$ +
,NN+ ,
newNN- 0
{NN1 2
	accountIdNN3 <
=NN= >
transactionNN? J
.NNJ K
	AccountIdNNK T
}NNU V
)NNV W
;NNW X
}OO 	
privateQQ 
voidQQ 
UpdateAmountAcountQQ '
(QQ' (
intQQ( +
	accountIdQQ, 5
)QQ5 6
{RR 	
varSS 
accountSS 
=SS 
contextSS !
.SS! "
AccountsSS" *
.TT 
IncludeTT 
(TT 
oTT 
=>TT 
oTT 
.TT  
TransactionsTT  ,
)TT, -
.UU 
FirstOrDefaultUU 
(UU  
oUU  !
=>UU" $
oUU% &
.UU& '
IdUU' )
==UU* ,
	accountIdUU- 6
)UU6 7
;UU7 8
varWW 
totalWW 
=WW 
accountWW 
.WW  
TransactionsWW  ,
.WW, -
SumWW- 0
(WW0 1
oWW1 2
=>WW3 5
oWW6 7
.WW7 8
AmountWW8 >
)WW> ?
;WW? @
accountXX 
.XX 
AmountXX 
=XX 
totalXX "
;XX" #
contextYY 
.YY 
SaveChangesYY 
(YY  
)YY  !
;YY! "
}ZZ 	
}[[ 
}\\ ∆#
bC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Controllers\TransferController.cs
	namespace		 	
FinancistoCloneWeb		
 
.		 
Controllers		 (
{

 
public 

class 
TransferController #
:$ %

Controller& 0
{ 
private 
readonly 
FinancistoContext *
context+ 2
;2 3
public 
TransferController !
(! "
FinancistoContext" 3
context4 ;
); <
{ 	
this 
. 
context 
= 
context "
;" #
} 	
[ 	
HttpGet	 
] 
public 
IActionResult 
Create #
(# $
)$ %
{ 	
ViewBag 
. 
Accounts 
= 
context &
.& '
Accounts' /
./ 0
ToList0 6
(6 7
)7 8
;8 9
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
public 
IActionResult 
Create #
(# $
int$ '
sourceAccountId( 7
,7 8
int9 <
destAccountId= J
,J K
decimalL S
ammountT [
)[ \
{ 	
var 
transaction1 
= 
new "
Transaction# .
{   
	AccountId!! 
=!! 
sourceAccountId!! +
,!!+ ,
Date"" 
="" 
DateTime"" 
.""  
Now""  #
,""# $
Type## 
=## 
$str## 
,## 
Summary$$ 
=$$ 
$str$$ )
,$$) *
Amount%% 
=%% 
ammount%%  
*%%! "
-%%# $
$num%%$ %
}&& 
;&& 
var(( 
transaction2(( 
=(( 
new(( "
Transaction((# .
{)) 
	AccountId** 
=** 
destAccountId** )
,**) *
Date++ 
=++ 
DateTime++ 
.++  
Now++  #
,++# $
Type,, 
=,, 
$str,,  
,,,  !
Summary-- 
=-- 
$str-- )
,--) *
Amount.. 
=.. 
ammount..  
}// 
;// 
context11 
.11 
Transactions11  
.11  !
Add11! $
(11$ %
transaction111% 1
)111 2
;112 3
context22 
.22 
Transactions22  
.22  !
Add22! $
(22$ %
transaction222% 1
)221 2
;222 3
context44 
.44 
SaveChanges44 
(44  
)44  !
;44! "
UpdateAmountAcount66 
(66 
sourceAccountId66 .
)66. /
;66/ 0
UpdateAmountAcount77 
(77 
destAccountId77 ,
)77, -
;77- .
return99 
RedirectToAction99 #
(99# $
$str99$ +
,99+ ,
$str99- 6
)996 7
;997 8
}:: 	
private== 
void== 
UpdateAmountAcount== '
(==' (
int==( +
	accountId==, 5
)==5 6
{>> 	
var?? 
account?? 
=?? 
context?? !
.??! "
Accounts??" *
.@@ 
Include@@ 
(@@ 
o@@ 
=>@@ 
o@@ 
.@@  
Transactions@@  ,
)@@, -
.AA 
FirstOrDefaultAA 
(AA  
oAA  !
=>AA" $
oAA% &
.AA& '
IdAA' )
==AA* ,
	accountIdAA- 6
)AA6 7
;AA7 8
varCC 
totalCC 
=CC 
accountCC 
.CC  
TransactionsCC  ,
.CC, -
SumCC- 0
(CC0 1
oCC1 2
=>CC3 5
oCC6 7
.CC7 8
AmountCC8 >
)CC> ?
;CC? @
accountDD 
.DD 
AmountDD 
=DD 
totalDD "
;DD" #
contextEE 
.EE 
SaveChangesEE 
(EE  
)EE  !
;EE! "
}FF 	
}GG 
}HH ·
RC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Account.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public		 

class		 
Account		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
TypeId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Currency 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
decimal 
Amount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	ImagePath 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
? 
Limit 
{ 
get  #
;# $
set% (
;( )
}* +
public 
Type 
Type 
{ 
get 
; 
set  #
;# $
}% &
public 
List 
< 
Transaction 
>  
Transactions! -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
} 
} ≈
OC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\City.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public 

class 
City 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ≠
YC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\ErrorViewModel.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
	RequestId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
bool		 
ShowRequestId		 !
=>		" $
!		% &
string		& ,
.		, -
IsNullOrEmpty		- :
(		: ;
	RequestId		; D
)		D E
;		E F
}

 
} ›
OC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\File.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public 

class 
File 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Path 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ê
\C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\FinancistoContext.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{		 
public

 

class

 
FinancistoContext

 "
:

# $
	DbContext

% .
{ 
public 
DbSet 
< 
Account 
> 
Accounts &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
Person 
> 
People #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DbSet 
< 
City 
> 
Cities !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DbSet 
< 
Type 
> 
Types  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Transaction  
>  !
Transactions" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
File 
> 
Files  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
FinancistoContext  
(  !
DbContextOptions! 1
<1 2
FinancistoContext2 C
>C D
optionsE L
)L M
: 
base 
( 
options 
) 
{ 
} 
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /

AccountMap0 :
(: ;
); <
)< =
;= >
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /
	PersonMap0 9
(9 :
): ;
); <
;< =
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /
CityMap0 7
(7 8
)8 9
)9 :
;: ;
modelBuilder   
.   
ApplyConfiguration   +
(  + ,
new  , /
TypeMap  0 7
(  7 8
)  8 9
)  9 :
;  : ;
modelBuilder!! 
.!! 
ApplyConfiguration!! +
(!!+ ,
new!!, /
UserMap!!0 7
(!!7 8
)!!8 9
)!!9 :
;!!: ;
modelBuilder"" 
."" 
ApplyConfiguration"" +
(""+ ,
new"", /
TransactionMap""0 >
(""> ?
)""? @
)""@ A
;""A B
modelBuilder## 
.## 
ApplyConfiguration## +
(##+ ,
new##, /
FileMap##0 7
(##7 8
)##8 9
)##9 :
;##: ;
}$$ 	
}&& 
}'' È
ZC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\AccountMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{		 
public

 

class

 

AccountMap

 
:

 $
IEntityTypeConfiguration

 6
<

6 7
Account

7 >
>

> ?
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
Account0 7
>7 8
builder9 @
)@ A
{ 	
builder 
. 
ToTable 
( 
$str %
)% &
;& '
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
builder 
. 
HasOne 
( 
o 
=> 
o  !
.! "
Type" &
)& '
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
o  
=>! #
o$ %
.% &
TypeId& ,
), -
;- .
builder 
. 
HasMany 
( 
o 
=>  
o! "
." #
Transactions# /
)/ 0
. 
WithOne 
( 
) 
. 
HasForeignKey 
( 
o  
=>! #
o$ %
.% &
	AccountId& /
)/ 0
;0 1
} 	
} 
} ≤
WC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\CityMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{		 
public

 

class

 
CityMap

 
:

 $
IEntityTypeConfiguration

 3
<

3 4
City

4 8
>

8 9
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
City0 4
>4 5
builder6 =
)= >
{ 	
builder 
. 
ToTable 
( 
$str "
)" #
;# $
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
} 	
} 
} ≤
WC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\FileMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{		 
public

 

class

 
FileMap

 
:

 $
IEntityTypeConfiguration

 3
<

3 4
File

4 8
>

8 9
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
File0 4
>4 5
builder6 =
)= >
{ 	
builder 
. 
ToTable 
( 
$str "
)" #
;# $
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
} 	
} 
} ∫
YC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\PersonMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{		 
public

 

class

 
	PersonMap

 
:

 $
IEntityTypeConfiguration

 5
<

5 6
Person

6 <
>

< =
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
Person0 6
>6 7
builder8 ?
)? @
{ 	
builder 
. 
ToTable 
( 
$str $
)$ %
;% &
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
} 	
} 
} Œ
^C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\TransactionMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{		 
public

 

class

 
TransactionMap

 
:

  !$
IEntityTypeConfiguration

" :
<

: ;
Transaction

; F
>

F G
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
Transaction0 ;
>; <
builder= D
)D E
{ 	
builder 
. 
ToTable 
( 
$str )
)) *
;* +
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
} 	
} 
} ≤
WC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\TypeMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{		 
public

 

class

 
TypeMap

 
:

 $
IEntityTypeConfiguration

 3
<

3 4
Type

4 8
>

8 9
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
Type0 4
>4 5
builder6 =
)= >
{ 	
builder 
. 
ToTable 
( 
$str "
)" #
;# $
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
} 	
} 
} ≤
WC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Maps\UserMap.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
.# $
Maps$ (
{ 
public 

class 
UserMap 
: $
IEntityTypeConfiguration 3
<3 4
User4 8
>8 9
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
User0 4
>4 5
builder6 =
)= >
{		 	
builder

 
.

 
ToTable

 
(

 
$str

 "
)

" #
;

# $
builder 
. 
HasKey 
( 
o 
=> 
o  !
.! "
Id" $
)$ %
;% &
} 	
} 
} ë
QC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Person.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public		 

class		 
Person		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
( 
ErrorMessage 
=  
$str  >
)> ?
]? @
[ 	
	MinLength	 
( 
$num 
) 
] 
[ 	
RegularExpression	 
( 
$str '
)' (
]( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
[ 	
	MinLength	 
( 
$num 
) 
] 
[ 	
RegularExpression	 
( 
$str '
)' (
]( )
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
	BirthDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
[ 	
	MinLength	 
( 
$num 
) 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Document 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Gender 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
[ 	
	MinLength	 
( 
$num 
) 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
[   	
EmailAddress  	 
]   
public!! 
string!! 
Email!! 
{!! 
get!! !
;!!! "
set!!# &
;!!& '
}!!( )
["" 	
RegularExpression""	 
("" 
$str"" *
)""* +
]""+ ,
public## 
string## 
Username## 
{##  
get##! $
;##$ %
set##& )
;##) *
}##+ ,
[$$ 	
Required$$	 
]$$ 
[%% 	
	MinLength%%	 
(%% 
$num%% 
)%% 
]%% 
public&& 
string&& 
Password&& 
{&&  
get&&! $
;&&$ %
set&&& )
;&&) *
}&&+ ,
}(( 
})) Ω	
VC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Transaction.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public 

class 
Transaction 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
int 
	AccountId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Summary 
{ 
get  #
;# $
set% (
;( )
}* +
public 
decimal 
Amount 
{ 
get  #
;# $
set& )
;) *
}+ ,
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ≈
OC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\Type.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public 

class 
Type 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
} 
} Â
OC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Models\User.cs
	namespace 	
FinancistoCloneWeb
 
. 
Models #
{ 
public 

class 
User 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ´

KC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Program.cs
	namespace

 	
FinancistoCloneWeb


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} õ
TC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\PruebaInterfaces.cs
	namespace 	
FinancistoCloneWeb
 
{ 
class		 	
Main2		
 
{

 
public 
Main2 
( 
) 
{ 	
int 
a 
= 
$num 
; 
string 
b 
= 
$str 
; 
MyClass 
c 
= 
new 
MyClass #
(# $
)$ %
;% &
IMyInterface 
i 
= 
new  
MyClass! (
(( )
)) *
;* +
var 
r 
= 
i 
. 
Multiplicar !
(! "
$num" #
,# $
$num% &
)& '
;' (
} 	
} 
public 

	interface 
IMyInterface !
{ 
int 
Multiplicar 
( 
int 
a 
, 
int "
b# $
)$ %
;% &
void 
OtherMethod 
( 
int 
a 
) 
;  
} 
public 

class 
MyClass 
: 
IMyInterface &
{ 
public 
int 
Multiplicar 
( 
int "
a# $
,$ %
int& )
b* +
)+ ,
{ 	
return 
a 
* 
b 
; 
}   	
public"" 
void"" 
OtherMethod"" 
(""  
int""  #
a""$ %
)""% &
{## 	
}%% 	
}&& 
public(( 

class(( 
MyOtherClass(( 
:(( 
IMyInterface((  ,
{)) 
public** 
int** 
Multiplicar** 
(** 
int** "
a**# $
,**$ %
int**& )
b*** +
)**+ ,
{++ 	
var,, 
	resultado,, 
=,, 
$num,, 
;,, 
for-- 
(-- 
var-- 
i-- 
=-- 
$num-- 
;-- 
i-- 
<-- 
b--  !
;--! "
i--# $
++--$ &
)--& '
	resultado.. 
+=.. 
a.. 
;.. 
return00 
	resultado00 
;00 
}11 	
public33 
void33 
OtherMethod33 
(33  
int33  #
a33$ %
)33% &
{44 	
}66 	
}77 
}88 ™

aC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Repositories\PersonRepository.cs
	namespace 	
FinancistoCloneWeb
 
. 
Repositories )
{ 
public		 

	interface		 
IPersonRepository		 &
{

 
public 
List 
< 
Person 
> 
GetAll "
(" #
)# $
;$ %
} 
public 

class 
PersonRepository !
:" #
IPersonRepository$ 5
{ 
private 
readonly 
FinancistoContext *
context+ 2
;2 3
public 
PersonRepository 
(  
FinancistoContext  1
context2 9
)9 :
{ 	
this 
. 
context 
= 
context "
;" #
} 	
public 
List 
< 
Person 
> 
GetAll "
(" #
)# $
{ 	
return 
context 
. 
People !
.! "
ToList" (
(( )
)) *
;* +
} 	
} 
} ®
_C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Repositories\UserRepository.cs
	namespace 	
FinancistoCloneWeb
 
. 
Repositories )
{ 
public		 

	interface		 
IUserRepository		 $
{

 
public 
User 
FindUser 
( 
string #
username$ ,
,, -
string. 4
password5 =
)= >
;> ?
User 
FindByUsername 
( 
string "
username# +
)+ ,
;, -
void 
Create 
( 
User 
user 
) 
; 
} 
public 

class 
UserRepository 
:  !
IUserRepository" 1
{ 
private 
readonly 
FinancistoContext *
context+ 2
;2 3
public 
UserRepository 
( 
FinancistoContext /
context0 7
)7 8
{ 	
this 
. 
context 
= 
context "
;" #
} 	
public 
void 
Create 
( 
User 
user  $
)$ %
{ 	
context 
. 
Add 
( 
user 
) 
; 
context 
. 
SaveChanges 
(  
)  !
;! "
} 	
public 
User 
FindByUsername "
(" #
string# )
username* 2
)2 3
{   	
return!! 
context!! 
.!! 
Users!!  
.!!  !
Where!!! &
(!!& '
o!!' (
=>!!) +
o!!, -
.!!- .
Username!!. 6
==!!7 9
username!!: B
)!!B C
.!!C D
FirstOrDefault!!D R
(!!R S
)!!S T
;!!T U
}"" 	
public$$ 
User$$ 
FindUser$$ 
($$ 
string$$ #
username$$$ ,
,$$, -
string$$. 4
password$$5 =
)$$= >
{%% 	
return&& 
context&& 
.&& 
Users&&  
.'' 
Where'' 
('' 
o'' 
=>'' 
o'' 
.'' 
Username'' %
==''& (
username'') 1
&&''2 4
o''5 6
.''6 7
Password''7 ?
==''@ B
password''C K
)''K L
.(( 
FirstOrDefault(( 
((( 
)((  
;((  !
})) 	
}** 
}++ ê
^C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Services\CookieAuthService.cs
	namespace		 	
FinancistoCloneWeb		
 
.		 
Services		 %
{

 
public 

	interface 
ICookieAuthService '
{ 
void 
SetHttpContext 
( 
HttpContext '
httpContext( 3
)3 4
;4 5
public 
void 
Login 
( 
ClaimsPrincipal )
claim* /
)/ 0
;0 1
} 
public 

class 
CookieAuthService "
:# $
ICookieAuthService% 7
{ 
private 
HttpContext 
httpContext '
;' (
public 
void 
SetHttpContext "
(" #
HttpContext# .
httpContext/ :
): ;
{ 	
this 
. 
httpContext 
= 
httpContext *
;* +
} 	
public 
void 
Login 
( 
ClaimsPrincipal )
claim* /
)/ 0
{ 	
httpContext 
. 
SignInAsync #
(# $
claim$ )
)) *
;* +
} 	
} 
}   î
]C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Services\DriveFileService.cs
	namespace 	
FinancistoCloneWeb
 
. 
Services %
{ 
public		 

class		 
DriveFileService		 !
:		" #
IFileService		$ 0
{

 
public 
object 
Download 
( 
object %
file& *
)* +
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
void 
Upload 
( 
	IFormFile $
file% )
)) *
{ 	
} 	
} 
} Û
_C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Services\DropboxFileService.cs
	namespace 	
FinancistoCloneWeb
 
. 
Services %
{ 
public 

class 
DropboxFileService #
:# $
IFileService% 1
{ 
public 
object 
Download 
( 
object %
file& *
)* +
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
void 
Upload 
( 
	IFormFile $
file% )
)) *
{ 	
Task 
task 
= 
AsyncUpload #
(# $
$str$ -
,- .
file/ 3
.3 4
FileName4 <
,< =
$str> E
)E F
;F G
task 
. 
Wait 
( 
) 
; 
} 	
private 
async 
Task 
AsyncUpload &
(& '
string' -
folder. 4
,4 5
string6 <
file= A
,A B
stringC I
contentJ Q
)Q R
{ 	
var 
token 
= 
$str	 ®
;
® ©
using 
( 
var 
dbx 
= 
new  
DropboxClient! .
(. /
token/ 4
)4 5
)5 6
{ 
var   
full   
=   
await    
dbx  ! $
.  $ %
Users  % *
.  * +"
GetCurrentAccountAsync  + A
(  A B
)  B C
;  C D
Console!! 
.!! 
	WriteLine!! !
(!!! "
$str!!" -
,!!- .
full!!/ 3
.!!3 4
Name!!4 8
.!!8 9
DisplayName!!9 D
,!!D E
full!!F J
.!!J K
Email!!K P
)!!P Q
;!!Q R
using## 
(## 
var## 
mem## 
=##  
new##! $
MemoryStream##% 1
(##1 2
Encoding##2 :
.##: ;
UTF8##; ?
.##? @
GetBytes##@ H
(##H I
content##I P
)##P Q
)##Q R
)##R S
{$$ 
var%% 
updated%% 
=%%  !
await%%" '
dbx%%( +
.%%+ ,
Files%%, 1
.%%1 2
UploadAsync%%2 =
(%%= >
folder&& 
+&&  
$str&&! $
+&&% &
file&&' +
,&&+ ,
	WriteMode'' !
.''! "
	Overwrite''" +
.''+ ,
Instance'', 4
,''4 5
body(( 
:(( 
mem(( !
)((! "
;((" #
Console)) 
.)) 
	WriteLine)) %
())% &
$str))& =
,))= >
folder))? E
,))E F
file))G K
,))K L
updated))M T
.))T U
Rev))U X
)))X Y
;))Y Z
}** 
}++ 
},, 	
}-- 
}.. ´
YC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Services\IFileService.cs
	namespace 	
FinancistoCloneWeb
 
. 
Services %
{ 
public		 

	interface		 
IFileService		 !
{

 
void 
Upload 
( 
	IFormFile 
file "
)" #
;# $
object 
Download 
( 
object 
file #
)# $
;$ %
} 
} ≤
]C:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Services\LocalFileService.cs
	namespace		 	
FinancistoCloneWeb		
 
.		 
Services		 %
{

 
public 

class 
LocalFileService !
:! "
IFileService# /
{ 
private 
readonly 
IHostEnvironment )
host* .
;. /
public 
LocalFileService 
(  
IHostEnvironment  0
host1 5
)5 6
{ 	
this 
. 
host 
= 
host 
; 
} 	
public 
object 
Download 
( 
object %
file& *
)* +
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
void 
Upload 
( 
	IFormFile $
file% )
)) *
{ 	
if 
( 
file 
!= 
null 
&& 
file  $
.$ %
Length% +
>, -
$num. /
)/ 0
{ 
var 
basePath 
= 
host #
.# $
ContentRootPath$ 3
+4 5
$str6 A
;A B
var 
ruta 
= 
$str %
+& '
file( ,
., -
FileName- 5
;5 6
using   
var   
strem   
=    !
new  " %

FileStream  & 0
(  0 1
basePath  1 9
+  : ;
ruta  < @
,  @ A
FileMode  B J
.  J K
Create  K Q
)  Q R
;  R S
file!! 
.!! 
CopyTo!! 
(!! 
strem!! !
)!!! "
;!!" #
}"" 
}## 	
}$$ 
}%% ¡ 
KC:\Users\user\source\repos\FinancistoCloneWeb\FinancistoCloneWeb\Startup.cs
	namespace 	
FinancistoCloneWeb
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. #
AddControllersWithViews ,
(, -
)- .
;. /
services 
. 
AddDbContext !
<! "
FinancistoContext" 3
>3 4
(4 5
options 
=> 
options "
." #
UseSqlServer# /
(/ 0
Configuration0 =
.= >
GetConnectionString> Q
(Q R
$strR a
)a b
)b c
) 
; 
services   
.   
AddAuthentication   &
(  & '(
CookieAuthenticationDefaults  ' C
.  C D 
AuthenticationScheme  D X
)  X Y
.!! 
	AddCookie!! 
(!! 
options!! "
=>!!# %
{"" 
options## 
.## 
	LoginPath## %
=##& '
$str##( 5
;##5 6
}$$ 
)$$ 
;$$ 
services'' 
.'' 
AddTransient'' !
<''! "
IPersonRepository''" 3
,''3 4
PersonRepository''5 E
>''E F
(''F G
)''G H
;''H I
services(( 
.(( 
AddTransient(( !
<((! "
IUserRepository((" 1
,((1 2
UserRepository((3 A
>((A B
(((B C
)((C D
;((D E
services)) 
.)) 
AddTransient)) !
<))! "
ICookieAuthService))" 4
,))4 5
CookieAuthService))6 G
>))G H
())H I
)))I J
;))J K
}.. 	
public11 
void11 
	Configure11 
(11 
IApplicationBuilder11 1
app112 5
,115 6
IWebHostEnvironment117 J
env11K N
)11N O
{22 	
if33 
(33 
env33 
.33 
IsDevelopment33 !
(33! "
)33" #
)33# $
{44 
app55 
.55 %
UseDeveloperExceptionPage55 -
(55- .
)55. /
;55/ 0
}66 
else77 
{88 
app99 
.99 
UseExceptionHandler99 '
(99' (
$str99( 5
)995 6
;996 7
app;; 
.;; 
UseHsts;; 
(;; 
);; 
;;; 
}<< 
app== 
.== 
UseHttpsRedirection== #
(==# $
)==$ %
;==% &
app>> 
.>> 
UseStaticFiles>> 
(>> 
)>>  
;>>  !
app@@ 
.@@ 

UseRouting@@ 
(@@ 
)@@ 
;@@ 
appAA 
.AA 
UseAuthenticationAA !
(AA! "
)AA" #
;AA# $
appBB 
.BB 
UseAuthorizationBB  
(BB  !
)BB! "
;BB" #
appDD 
.DD 
UseEndpointsDD 
(DD 
	endpointsDD &
=>DD' )
{EE 
	endpointsFF 
.FF 
MapControllerRouteFF ,
(FF, -
nameGG 
:GG 
$strGG #
,GG# $
patternHH 
:HH 
$strHH E
)HHE F
;HHF G
}II 
)II 
;II 
}JJ 	
}KK 
}LL 